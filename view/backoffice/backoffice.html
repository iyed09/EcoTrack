<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="EcoTrack Backoffice - Interface de gestion administrative pour mod√©rer les publications et commentaires" />
    <meta name="author" content="EcoTrack Team" />
    <meta name="robots" content="noindex, nofollow" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>EcoTrack - Backoffice Administration</title>
    <link rel="stylesheet" href="backoffice.css">
</head>

<body>
    <div class="app">
        <aside class="sidebar">
            <div class="sidebar-inner">
                <div class="logo">EcoTrack Admin</div>
                <!-- Small profile + community guidelines (replaces static sidebar stats) -->
                <div class="sidebar-profile">
                    <div class="avatar" aria-hidden="true">ET</div>
                    <div class="profile-info">
                        <div class="profile-name">EcoTrack Admin</div>
                        <div class="profile-role">Gestionnaire</div>
                    </div>
                </div>

                <div class="community-guide">
                    <h3>R√®gles de la communaut√©</h3>
                    <p class="guide-excerpt">Soyez respectueux, partagez des id√©es constructives et √©vitez les contenus
                        inappropri√©s.</p>
                    <button id="openGuide" class="btn btn-primary" aria-label="Ouvrir la charte de la communaut√©">Lire
                        la charte</button>
                </div>

                <!-- keep numeric counters hidden for JS compatibility -->
                <div class="sidebar-hidden-counters" style="display:none;">
                    <div id="sentCount">0</div>
                    <div id="commentCount">0</div>
                    <div id="editCount">0</div>
                    <div id="deleteCount">0</div>
                </div>

                <nav class="sidebar-nav">
                    <!-- Navigation items removed per request -->
                </nav>
            </div>
            <button id="sidebarHandle" class="sidebar-handle" aria-label="Basculer la barre">‚Äπ</button>
        </aside>

        <div class="main">
            <header class="topbar" role="banner">
                <div class="topbar-left">
                    <button id="sidebarToggle" class="btn btn-secondary" aria-expanded="true"
                        aria-label="Basculer la barre lat√©rale">‚ò∞</button>
                    <h1 class="topbar-brand"
                        style="margin: 0 0 0 16px; font-size: 1.1rem; font-weight: 700; color: var(--accent);">
                        Administration</h1>
                </div>
                <div class="topbar-actions">
                    <a href="../frontoffice/frontoffice.html" class="btn btn-secondary"
                        aria-label="Acc√©der √† l'interface utilisateur">
                        <span aria-hidden="true">üëÅÔ∏è</span> Acc√©der au Frontoffice
                    </a>
                </div>
            </header>

            <main class="container content-area" role="main">
                <h1 class="page-title">Tableau de bord</h1>
                <p class="page-subtitle">Vue d'ensemble des publications et outils de mod√©ration</p>

                <!-- Visual dashboard overview (appearance only) -->
                <div class="dashboard-overview card" aria-hidden="true">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üì§</div>
                            <div class="stat-body">
                                <div class="stat-number" id="overviewSent">0</div>
                                <div class="stat-label">Publications ajout√©s</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üí¨</div>
                            <div class="stat-body">
                                <div class="stat-number" id="overviewComments">0</div>
                                <div class="stat-label">Commentaires ajout√©s</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚úèÔ∏è</div>
                            <div class="stat-body">
                                <div class="stat-number" id="overviewEdit">0</div>
                                <div class="stat-label">Commentaires modifi√©s</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üóëÔ∏è</div>
                            <div class="stat-body">
                                <div class="stat-number" id="overviewDelete">0</div>
                                <div class="stat-label">Commentaires supprim√©s</div>
                            </div>
                        </div>
                        <div class="stat-card" id="reportsCard" style="cursor:pointer;" role="button" tabindex="0"
                            aria-label="Voir les signalements">
                            <div class="stat-icon">üö®</div>
                            <div class="stat-body">
                                <div class="stat-number" id="overviewReports">0</div>
                                <div class="stat-label">Signalements en attente</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports Section (hidden by default) -->
                <div id="reportsSection" class="card table-card" style="display:none;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                        <h2 style="margin:0;font-size:1.5rem;color:#1e7e34;">Signalements en attente </h2>
                        <button id="closeReports" class="btn btn-secondary">‚Üê Retour au tableau de bord</button>
                    </div>
                    <div id="reportsFeed" style="display:flex;flex-direction:column;gap:16px;">
                        <div style="text-align:center;padding:40px;color:#666;">
                            <span style="font-size:48px;">‚è≥</span>
                            <p>Chargement des signalements...</p>
                        </div>
                    </div>
                </div>

                <div class="card table-card">
                    <div class="quick-help" role="note" aria-live="polite">
                        <strong>üí° Astuce:</strong> Cliquez sur "Voir" pour afficher les commentaires, ou utilisez
                        "Modifier"/"Supprimer" pour g√©rer les publications
                    </div>

                    <!-- Search and Filter Section -->
                    <div class="search-filter-section"
                        style="margin-bottom: 20px; padding: 16px; background: linear-gradient(180deg, #f7fff8, #ffffff); border-radius: 10px; border: 1px solid #e6f2e8;">
                        <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 250px; position: relative;">
                                <span
                                    style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280; font-size: 18px;">üîç</span>
                                <input type="text" id="searchInput"
                                    placeholder="Rechercher dans les publications et commentaires..."
                                    style="width: 100%; padding: 10px 10px 10px 40px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px;"
                                    aria-label="Rechercher des publications ou commentaires" />
                            </div>
                            <div>
                                <select id="filterType"
                                    style="padding: 10px 14px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; background: white; cursor: pointer;"
                                    aria-label="Filtrer par type">
                                    <option value="all">üìã Tous</option>
                                    <option value="posts">üìù Publications seulement</option>
                                    <option value="comments">üí¨ Commentaires seulement</option>
                                </select>
                            </div>
                            <button id="clearSearch" class="btn-search-clear" aria-label="Effacer la recherche">
                                <span>‚úñ</span> Effacer
                            </button>
                        </div>
                        <div id="searchResults"
                            style="margin-top: 10px; font-size: 13px; color: #6b7280; font-weight: 600;"></div>
                    </div>

                    <section id="backofficeFeed" class="feed" aria-live="polite" aria-busy="true">
                        <!-- Posts and comments will be loaded here dynamically by backoffice.js -->
                        <div class="feed-empty" role="status">
                            <span class="loading-spinner" aria-hidden="true">‚è≥</span> Chargement des publications...
                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="confirmModal" class="confirm-modal" style="display: none;">
        <div class="confirm-modal-content">
            <div class="confirm-modal-header">
                <h3 id="confirmModalTitle"></h3>
            </div>
            <div class="confirm-modal-body">
                <p id="confirmModalMessage"></p>
            </div>
            <div class="confirm-modal-footer">
                <button id="confirmModalCancel" class="btn btn-secondary">Annuler</button>
                <button id="confirmModalOk" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <script src="backoffice.js?v=2.0"></script>
</body>

</html>